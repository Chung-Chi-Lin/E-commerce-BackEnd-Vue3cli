{"version":3,"file":"js/968.9ab0f81f.js","mappings":"iMAEOA,MAAM,a,GACJA,MAAM,Y,GACJA,MAAM,Y,GACFA,MAAM,sB,GACXC,EAAAA,EAAAA,GAOQ,eANRA,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAa,UAAT,SACJA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAS,a,GAKLC,MAAA,iB,GAIGC,KAAK,IAAIH,MAAM,a,SAEfA,MAAM,M,SACNA,MAAM,M,SACNA,MAAM,M,GAGNA,MAAM,0B,gDASHA,MAAM,2CAA2CI,KAAK,U,GACxDH,EAAAA,EAAAA,GAA+C,QAAzCD,MAAM,mBAAkB,cAAU,G,GAAxCK,G,GAWTL,MAAM,Y,GACJA,MAAM,c,GACFA,MAAM,sB,GACXC,EAAAA,EAAAA,GAOQ,eANNA,EAAAA,EAAAA,GAKK,YAJHA,EAAAA,EAAAA,GAAS,OACTA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAgC,MAA5BC,MAAA,iBAAqB,OACzBD,EAAAA,EAAAA,GAAW,UAAP,UAAE,G,4BAUFA,EAAAA,EAAAA,GAAuB,KAApBD,MAAM,WAAS,S,GAAlBM,G,SAKGN,MAAM,gB,GAKNA,MAAM,8B,mDAMJA,MAAM,oB,GAGXA,MAAM,Y,SACsCA,MAAM,gB,GAQxDC,EAAAA,EAAAA,GAAwC,MAApCM,QAAQ,IAAIP,MAAM,YAAW,MAAE,G,GAC/BA,MAAM,Y,aAGVC,EAAAA,EAAAA,GAAsD,MAAlDM,QAAQ,IAAIP,MAAM,yBAAwB,OAAG,G,GAC7CA,MAAM,yB,GAITA,MAAM,mC,GAGJA,MAAM,sB,+FAzGrBQ,EAAAA,EAAAA,IAAiDC,EAAAA,CAAlCC,OAAQC,EAAAA,WAAS,oBAChCV,EAAAA,EAAAA,GAiHM,MAjHNW,EAiHM,EAhHJX,EAAAA,EAAAA,GA+GM,MA/GNY,EA+GM,EA9GJZ,EAAAA,EAAAA,GA0CM,MA1CNa,EA0CM,EAzCJb,EAAAA,EAAAA,GAwCQ,QAxCRc,EAwCQ,CAvCNC,GAQAf,EAAAA,EAAAA,GA8BQ,6BA7BRgB,EAAAA,EAAAA,IA4BKC,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IA5BcC,EAAAA,UAARC,K,WAAXH,EAAAA,EAAAA,IA4BK,MA5ByBI,IAAKD,EAAKE,I,EACtCrB,EAAAA,EAAAA,GAGK,KAHLsB,EAGK,EAFHtB,EAAAA,EAAAA,GAC0D,OADrDC,OAA0E,SAA1E,0EAA0E,CAAAsB,gBAAAA,OAC9CJ,EAAKK,gB,WAExCxB,EAAAA,EAAAA,GAA2D,YAAvDA,EAAAA,EAAAA,GAAkD,IAAlDyB,GAAkD,QAAjBN,EAAKO,OAAK,MAC/C1B,EAAAA,EAAAA,GAIK,WAHoBmB,EAAKQ,OAAgC,iBAA3B,WAAjCX,EAAAA,EAAAA,IAAkE,MAAlEY,GAAkE,QAA5BT,EAAKU,cAAe,KAAE,IACtCV,EAAKQ,QAAK,WAAhCX,EAAAA,EAAAA,IAAoE,MAApEc,EAAkC,OAAG,QAAGX,EAAKU,cAAe,KAAE,oBACxCV,EAAKQ,QAAK,WAAhCX,EAAAA,EAAAA,IAA+D,MAA/De,EAAkC,SAAK,QAAGZ,EAAKQ,OAAQ,KAAE,uBAE3D3B,EAAAA,EAAAA,GAgBK,YAfHA,EAAAA,EAAAA,GAcM,MAdNgC,EAcM,EAbJhC,EAAAA,EAAAA,GAGS,UAHDiC,KAAK,SAASlC,MAAM,4BACnBmC,QAAK,GAAEC,EAAAA,WAAWhB,EAAKE,KAAK,SAErC,MACArB,EAAAA,EAAAA,GAQS,UARDiC,KAAK,SAASlC,MAAM,yBACnBqC,SAAQ,KAAOC,OAAOC,cAAgBnB,EAAKE,GAC3Ca,QAAK,GAAEC,EAAAA,QAAQhB,EAAKE,K,MACXgB,OAAOC,cAAgBnB,EAAKE,KAAE,WAA9CL,EAAAA,EAAAA,IAGM,MAHNuB,EAGM,yCAER,c,aAQVvC,EAAAA,EAAAA,GAiEM,MAjENwC,EAiEM,EAhEJxC,EAAAA,EAAAA,GA+DM,MA/DNyC,EA+DM,EA9DJzC,EAAAA,EAAAA,GAoDQ,QApDR0C,EAoDQ,CAnDNC,GAQA3C,EAAAA,EAAAA,GAgCQ,cA/BQkB,EAAAA,KAAK0B,QAAK,aACxB5B,EAAAA,EAAAA,IA4BKC,EAAAA,GAAAA,CAAAG,IAAAA,IAAA,QA5BcF,EAAAA,KAAK0B,OAAbzB,K,WAAXH,EAAAA,EAAAA,IA4BK,MA5B2BI,IAAKD,EAAKE,I,EACxCrB,EAAAA,EAAAA,GAMK,YALHA,EAAAA,EAAAA,GAIS,UAJDiC,KAAK,SAASlC,MAAM,gCACnBqC,SAAUlB,EAAAA,OAAOoB,cAAgBnB,EAAKE,GACtCa,QAAK,GAAEC,EAAAA,eAAehB,EAAKE,K,UAItCrB,EAAAA,EAAAA,GAKK,6BAJAmB,EAAK0B,QAAQnB,OAAQ,IACxB,GAAgCP,EAAK2B,SAAM,WAA3C9B,EAAAA,EAAAA,IAEM,MAFN+B,EAA6C,cAE7C,kBAEF/C,EAAAA,EAAAA,GASK,YARHA,EAAAA,EAAAA,GAOM,MAPNgD,EAOM,WANJhD,EAAAA,EAAAA,GAIgC,SAJzBiC,KAAK,SAASlC,MAAM,eAAe,aAAW,OAC/CkD,IAAI,IACHb,SAAUjB,EAAKE,KAAOH,EAAAA,OAAOoB,YAC7BY,SAAM,GAAEf,EAAAA,WAAWhB,G,yBACJA,EAAKgC,IAAG,G,kBAARhC,EAAKgC,SAAG,G,QAAxB,OACNnD,EAAAA,EAAAA,GAA6D,MAA7DoD,EAA8B,MAAE,QAAGjC,EAAK0B,QAAQQ,MAAI,QAGxDrD,EAAAA,EAAAA,GAGK,KAHLsD,EAGK,CAFUpC,EAAAA,KAAKqC,cAAgBrC,EAAAA,KAAKsC,QAAK,WAA5CxC,EAAAA,EAAAA,IAA+E,QAA/EyC,EAAmE,UAAI,wBAAQ,KAC/E,QAAG/C,EAAAA,SAASgD,SAASvC,EAAKoC,cAAW,U,yBAK3CvD,EAAAA,EAAAA,GASQ,eARRA,EAAAA,EAAAA,GAGK,WAFH2D,GACA3D,EAAAA,EAAAA,GAA6D,KAA7D4D,GAA6D,QAArClD,EAAAA,SAASgD,SAASxC,EAAAA,KAAKsC,QAAK,KAE5CtC,EAAAA,KAAKqC,cAAgBrC,EAAAA,KAAKsC,QAAK,WAAzCxC,EAAAA,EAAAA,IAGK,QAFH6C,GACA7D,EAAAA,EAAAA,GAAgF,KAAhF8D,GAAgF,QAA3CpD,EAAAA,SAASgD,SAASxC,EAAAA,KAAKqC,cAAW,2BAI3EvD,EAAAA,EAAAA,GAQM,MARN+D,EAQM,WAPJ/D,EAAAA,EAAAA,GAC2C,SADpCiC,KAAK,OAAOlC,MAAM,eAAe,aAAW,S,qCAC1CmB,EAAAA,YAAW,GAAE8C,YAAY,U,iBAAzB9C,EAAAA,gBACTlB,EAAAA,EAAAA,GAIM,MAJNiE,EAIM,EAHJjE,EAAAA,EAAAA,GAES,UAFDD,MAAM,4BAA4BkC,KAAK,SAAUC,QAAK,oBAAEC,EAAAA,eAAAA,EAAAA,iBAAAA,KAAe,wBAE/E,G,aASd,GACE+B,OACE,MAAO,CACLC,SAAU,GACVtB,QAAS,CAAC,EACVR,OAAQ,CACNC,YAAa,IAEf8B,KAAM,CAAC,EACPC,YAAa,GAEjB,EACAC,QAAS,CACPC,cACE,MAAMC,EAAO,qEACbC,KAAKC,WAAY,EACjBD,KAAKE,MAAMC,IAAIJ,GAAKK,MAAMC,IACxBL,KAAKN,SAAWW,EAASZ,KAAKC,SAC9BY,QAAQC,IAAI,YAAaF,GACzBL,KAAKC,WAAY,CAAK,GAE1B,EACAO,WAAW5D,GACToD,KAAKS,QAAQC,KAAM,iBAAgB9D,IACrC,EACA+D,QAAQ/D,GACN,MAAMmD,EAAO,6DACbC,KAAKpC,OAAOC,YAAcjB,EAC1B,MAAM+C,EAAO,CACXiB,WAAYhE,EACZ8B,IAAK,GAEPsB,KAAKE,MAAMW,KAAKd,EAAK,CAAEN,KAAME,IAC1BS,MAAMU,IACLd,KAAKpC,OAAOC,YAAc,GAC1ByC,QAAQC,IAAIO,GACZd,KAAKe,SAAS,GAEpB,EACAA,UACE,MAAMhB,EAAO,6DACbC,KAAKC,WAAY,EACjBD,KAAKE,MAAMC,IAAIJ,GAAKK,MAAMC,IACxBC,QAAQC,IAAIF,GACZL,KAAKL,KAAOU,EAASZ,KAAKA,KAC1BO,KAAKC,WAAY,CAAK,GAE1B,EACAe,WAAWtE,GACT,MAAMqD,EAAO,8DAAiErD,EAAKE,KACnFoD,KAAKC,WAAY,EACjBD,KAAKpC,OAAOC,YAAcnB,EAAKE,GAC/B,MAAM+C,EAAO,CACXiB,WAAYlE,EAAKkE,WACjBlC,IAAKhC,EAAKgC,KAEZsB,KAAKE,MAAMe,IAAIlB,EAAK,CAAEN,KAAME,IAAQS,MAAMU,IACxCR,QAAQC,IAAIO,GACZd,KAAKpC,OAAOC,YAAc,GAC1BmC,KAAKe,SAAS,GAElB,EACAG,eAAetE,GACboD,KAAKpC,OAAOC,YAAcjB,EAC1B,MAAMmD,EAAO,8DAAiEnD,IAC9EoD,KAAKC,WAAY,EACjBD,KAAKE,MAAMiB,OAAOpB,GAAKK,MAAMC,IAC3BL,KAAKoB,kBAAkBf,EAAU,WACjCL,KAAKpC,OAAOC,YAAc,GAC1BmC,KAAKe,UACLf,KAAKC,WAAY,CAAK,GAE1B,EACAoB,gBACE,MAAMtB,EAAO,+DACP1B,EAAS,CACbiD,KAAMtB,KAAKJ,aAEbI,KAAKC,WAAY,EACjBD,KAAKE,MAAMW,KAAKd,EAAK,CAAEN,KAAMpB,IAAU+B,MAAMC,IAC3CL,KAAKoB,kBAAkBf,EAAU,SACjCL,KAAKe,UACLf,KAAKC,WAAY,CAAK,GAE1B,GAEFsB,UACEvB,KAAKF,cACLE,KAAKe,SACP,G,QC1MF,MAAMS,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://final/./src/views/UserCart.vue","webpack://final/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\n  <loading-page :active=\"isLoading\"></loading-page>\n  <div class=\"container\">\n    <div class=\"row mt-4\">\n      <div class=\"col-md-7\">\n        <table class=\"table align-middle\">\n          <thead>\n          <tr>\n            <th>圖片</th>\n            <th>商品名稱</th>\n            <th>價格</th>\n            <th></th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr v-for=\"item in products\" :key=\"item.id\">\n            <td style=\"width: 200px\">\n              <div style=\"height: 100px; background-size: cover; background-position: center\"\n              :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\n            </td>\n            <td><a href=\"#\" class=\"text-dark\">{{ item.title }}</a></td>\n            <td>\n              <div class=\"h5\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\n              <del class=\"h6\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\n              <div class=\"h5\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\n            </td>\n            <td>\n              <div class=\"btn-group btn-group-sm\">\n                <button type=\"button\" class=\"btn btn-outline-secondary\"\n                        @click=\"getProduct(item.id)\">\n                  查看更多\n                </button>\n                <button type=\"button\" class=\"btn btn-outline-danger\"\n                        :disabled=\"this.status.loadingItem === item.id\"\n                        @click=\"addCart(item.id)\">\n                  <div v-if=\"this.status.loadingItem === item.id\"\n                      class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                  加到購物車\n                </button>\n              </div>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n      <!-- 購物車列表 -->\n      <div class=\"col-md-5\">\n        <div class=\"sticky-top\">\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 110px\">數量</th>\n                <th>單價</th>\n              </tr>\n            </thead>\n            <tbody>\n            <template v-if=\"cart.carts\">\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                <td>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\n                          :disabled=\"status.loadingItem === item.id\"\n                          @click=\"removeCartItem(item.id)\">\n                    <i class=\"bi bi-x\"></i>\n                  </button>\n                </td>\n                <td>\n                  {{ item.product.title }}\n                  <div class=\"text-success\" v-if=\"item.coupon\">\n                    已套用優惠券\n                  </div>\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <input type=\"number\" class=\"form-control\" aria-label=\"商品數量\"\n                          min=\"1\"\n                          :disabled=\"item.id === status.loadingItem\"\n                          @change=\"updateCart(item)\"\n                          v-model.number=\"item.qty\">\n                    <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">折扣價：</small>\n                  {{ $filters.currency(item.final_total) }}\n                </td>\n              </tr>\n            </template>\n            </tbody>\n            <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\n            </tr>\n            <tr v-if=\"cart.final_total !== cart.total\">\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n              <td class=\"text-end text-success\">{{ $filters.currency(cart.final_total) }}</td>\n            </tr>\n            </tfoot>\n          </table>\n          <div class=\"input-group mb-3 input-group-sm\">\n            <input type=\"text\" class=\"form-control\" aria-label=\"請輸入優惠碼\"\n            v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n                套用優惠碼\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      product: {},\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      cart: {},\n      coupon_code: '',\n    };\n  },\n  methods: {\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products;\n        console.log('products:', response);\n        this.isLoading = false;\n      });\n    },\n    getProduct(id) {\n      this.$router.push(`/user/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id;\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http.post(url, { data: cart })\n        .then((res) => {\n          this.status.loadingItem = '';\n          console.log(res);\n          this.getCart();\n        });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        console.log(response);\n        this.cart = response.data.data;\n        this.isLoading = false;\n      });\n    },\n    updateCart(item) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart }).then((res) => {\n        console.log(res);\n        this.status.loadingItem = '';\n        this.getCart();\n      });\n    },\n    removeCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '移除購物車品項');\n        this.status.loadingItem = '';\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon }).then((response) => {\n        this.$httpMessageState(response, '加入優惠券');\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n  },\n  created() {\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=bc0c4862\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"G:\\\\前端\\\\Microsoft VS Code\\\\allPractice\\\\Vue3\\\\vuefinal\\\\final\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","href","role","_hoisted_15","_hoisted_22","colspan","_createVNode","_component_loading_page","active","_ctx","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","$data","item","key","id","_hoisted_6","backgroundImage","imageUrl","_hoisted_7","title","price","_hoisted_8","origin_price","_hoisted_9","_hoisted_10","_hoisted_11","type","onClick","$options","disabled","status","loadingItem","_hoisted_14","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","carts","product","coupon","_hoisted_24","_hoisted_25","min","onChange","qty","_hoisted_27","unit","_hoisted_28","final_total","total","_hoisted_29","currency","_hoisted_30","_hoisted_31","_hoisted_33","_hoisted_34","_hoisted_35","placeholder","_hoisted_36","data","products","cart","coupon_code","methods","getProducts","url","this","isLoading","$http","get","then","response","console","log","getProduct","$router","push","addCart","product_id","post","res","getCart","updateCart","put","removeCartItem","delete","$httpMessageState","addCouponCode","code","created","__exports__","render"],"sourceRoot":""}